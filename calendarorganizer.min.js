"use strict";function Calendar(e,t,n,a,i){this.id=e,this.size=t,this.labelSettings=n,this.colors=a,this.initday=0,i=i||{},this.indicator=!0,void 0!=i.indicator&&(this.indicator=i.indicator);var d=["January","February","March","April","May","June","July","August","September","October","November","December"];void 0!=i.months&&12==i.months.length&&(d=i.months);var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];void 0!=i.days&&7==i.days.length&&(l=i.days),this.months=d,this.label=[],this.labels=[];for(s=0;s<7;s++)this.label.push(l[l.indexOf(n[0])+this.label.length>=l.length?Math.abs(l.length-(l.indexOf(n[0])+this.label.length)):l.indexOf(n[0])+this.label.length]);for(var s=0;s<7;s++)this.labels.push(this.label[s].substring(0,n[1]>3?3:n[1]));this.date=new Date,this.draw(),this.update(),this.setOnClickListener("days-blocks"),this.setOnClickListener("month-slider"),this.setOnClickListener("year-slider")}function Organizer(e,t,n){this.id=e,this.calendar=t,this.data=n||{},this.draw();var a=this;a.onMonthChange(function(){a.indicateEvents()}),this.setOnClickListener("days-blocks"),this.setOnClickListener("day-slider"),this.setOnClickListener("month-slider"),this.setOnClickListener("year-slider")}Calendar.prototype={constructor:Calendar,back:function(e){var t=this.date,n=(new Date(t.getMonth()+1>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+1>12?0:t.getMonth()+1,0).getDate(),new Date(t.getMonth()<0?t.getFullYear()-1:t.getFullYear(),t.getMonth()<0?11:t.getMonth(),0).getDate());"month"==e?(t.getDate()>n&&this.changeDateTo(n),t.getMonth()>0?t.setMonth(t.getMonth()-1):(t.setMonth(11),t.setFullYear(t.getFullYear()-1))):"year"==e&&t.setFullYear(t.getFullYear()-1),this.update()},next:function(e){var t=this.date,n=(new Date(t.getMonth()+1>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+1>12?0:t.getMonth()+1,0).getDate(),new Date(t.getMonth()+2>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+2>12?0:t.getMonth()+2,0).getDate());"month"==e?(t.getDate()>n&&this.changeDateTo(n),11!=t.getMonth()?t.setMonth(t.getMonth()+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))):t.setFullYear(t.getFullYear()+1),this.update()},changeDateTo:function(e,t){if(t>=31&&e<=11||t<=6&&e>=8){t>=31&&e<=11?this.next("month"):t<=6&&e>=8&&this.back("month"),this.date.setDate(e);var n=this;return setTimeout(function(){n.update()},1),!0}this.date.setDate(e)}},Calendar.prototype.draw=function(){var e='<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="'+this.colors[3]+'" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"></path></svg>',t='<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="'+this.colors[3]+'" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"></path></svg>',n=document.createElement("DIV");n.className="calendar "+this.size,document.getElementById(this.id).appendChild(n);for(var a=[],i=["year","month","labels","days"],d=0;d<i.length;d++)if(a[d]=document.createElement("DIV"),a[d].className=i[d],"days"!=i[d])if("month"!=i[d])a[d].style.backgroundColor=this.colors[1],a[d].style.color=this.colors[3],"labels"!=i[d]&&((l=document.createElement("DIV")).id=this.id+"-year-back",l.insertAdjacentHTML("beforeend",e),a[d].appendChild(l),(u=document.createElement("SPAN")).id=this.id+"-"+i[d],a[d].appendChild(u),(s=document.createElement("DIV")).id=this.id+"-year-next",s.insertAdjacentHTML("beforeend",t),a[d].appendChild(s));else{a[d].style.backgroundColor=this.colors[0],a[d].style.color=this.colors[2];var l=document.createElement("DIV");l.id=this.id+"-month-back",l.insertAdjacentHTML("beforeend",e),a[d].appendChild(l),(u=document.createElement("SPAN")).id=this.id+"-"+i[d],a[d].appendChild(u);var s=document.createElement("DIV");s.id=this.id+"-month-next",s.insertAdjacentHTML("beforeend",t),a[d].appendChild(s)}for(d=0;d<this.labels.length;d++){var o=document.createElement("SPAN");o.id=this.id+"-label-"+(d+1),o.appendChild(document.createTextNode(this.labels[d])),a[2].appendChild(o)}for(var h=[],r=[],c=[],d=0;d<6;d++)h[d]=document.createElement("DIV"),h[d].className="row";for(var d=0,m=0;d<42;d++){c[d]=document.createElement("INPUT"),c[d].className="day-radios",c[d].type="radio",c[d].name=this.id+"-day-radios",c[d].id=this.id+"-day-radio-"+(d+1),r[d]=document.createElement("LABEL"),r[d].className="day",r[d].htmlFor=this.id+"-day-radio-"+(d+1),r[d].id=this.id+"-day-"+(d+1);var u=document.createElement("SPAN");u.id=this.id+"-day-num-"+(d+1),r[d].appendChild(u),h[m].appendChild(c[d]),h[m].appendChild(r[d]),(d+1)%7==0&&m++}for(d=0;d<6;d++)a[3].appendChild(h[d]);for(d=0;d<a.length;d++)n.appendChild(a[d]);document.getElementById(this.id).innerHTML="<style>.day.active::before { background-color: "+this.colors[1]+"; }</style>",document.getElementById(this.id).appendChild(n)},Calendar.prototype.update=function(){document.getElementById(this.id+"-year").innerHTML=this.date.getFullYear(),document.getElementById(this.id+"-month").innerHTML=this.months[this.date.getMonth()];for(a=1;a<=42;a++)document.getElementById(this.id+"-day-num-"+a).innerHTML="",document.getElementById(this.id+"-day-"+a).className=this.id+" day listed";var e=new Date(this.date.getFullYear(),this.date.getMonth(),1).getDay(),t=new Date(this.date.getMonth()+1>11?this.date.getFullYear()+1:this.date.getFullYear(),this.date.getMonth()+1>12?0:this.date.getMonth()+1,0).getDate(),n=new Date(this.date.getMonth()<0?this.date.getFullYear()-1:this.date.getFullYear(),this.date.getMonth()<0?11:this.date.getMonth(),0).getDate();this.initday=this.label.indexOf(this.label[e]);for(var a=0,i=n;a<this.label.indexOf(this.label[e]);a++,i--)document.getElementById(this.id+"-day-num-"+(this.label.indexOf(this.label[e])-a)).innerHTML=i,document.getElementById(this.id+"-day-"+(this.label.indexOf(this.label[e])-a)).className=this.id+" day diluted";for(a=1;a<=t;a++)document.getElementById(this.id+"-day-num-"+(this.label.indexOf(this.label[e])+a)).innerHTML=a,a==this.date.getDate()&&(document.getElementById(this.id+"-day-radio-"+(this.label.indexOf(this.label[e])+a)).checked=!0);for(var a=t+1,i=1;this.label.indexOf(this.label[e])+a<=42;a++,i++)document.getElementById(this.id+"-day-num-"+(this.label.indexOf(this.label[e])+a)).innerHTML=i,document.getElementById(this.id+"-day-"+(this.label.indexOf(this.label[e])+a)).className=this.id+" day diluted"},Calendar.prototype.setupBlock=function(e,t,n){document.getElementById(t.id+"-day-"+e).onclick=function(){document.getElementById(t.id+"-day-num-"+e).innerHTML.length>0&&(t.changeDateTo(document.getElementById(t.id+"-day-num-"+e).innerHTML,e),n())}},Calendar.prototype.setOnClickListener=function(e,t,n){var a=this.id;t=t||function(){},n=n||function(){};var i=this;switch(e){case"days-blocks":for(var d=1;d<=42;d++)i.setupBlock(d,i,t);break;case"month-slider":document.getElementById(a+"-month-back").onclick=function(){i.back("month"),t()},document.getElementById(a+"-month-next").onclick=function(){i.next("month"),n()};break;case"year-slider":document.getElementById(a+"-year-back").onclick=function(){i.back("year"),t()},document.getElementById(a+"-year-next").onclick=function(){i.next("year"),n()}}},Organizer.prototype={constructor:Organizer,back:function(e){var t=this.calendar.date,n=new Date(t.getMonth()+1>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+1>12?0:t.getMonth()+1,0).getDate();new Date(t.getMonth()<0?t.getFullYear()-1:t.getFullYear(),t.getMonth()<0?11:t.getMonth(),0).getDate();if("day"==e)1!=t.getDate()?(this.changeDateTo(t.getDate()-1),this.update()):(this.calendar.back("month"),this.changeDateTo(n),(a=this).onMonthChange(function(){a.indicateEvents()})),document.getElementById(this.calendar.id+"-day-radio-"+(this.calendar.initday+t.getDate())).checked=!0;else{this.calendar.back(e);var a=this;a.onMonthChange(function(){a.indicateEvents()})}},next:function(e){var t=this.calendar.date,n=new Date(t.getMonth()+1>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+1>12?0:t.getMonth()+1,0).getDate();new Date(t.getMonth()+2>11?t.getFullYear()+1:t.getFullYear(),t.getMonth()+2>12?0:t.getMonth()+2,0).getDate();if("day"==e)t.getDate()!=n?(t.setDate(t.getDate()+1),this.update()):(this.calendar.next("month"),t.setDate(1),(a=this).onMonthChange(function(){a.indicateEvents()})),document.getElementById(this.calendar.id+"-day-radio-"+(this.calendar.initday+t.getDate())).checked=!0;else{this.calendar.next(e);var a=this;a.onMonthChange(function(){a.indicateEvents()})}},changeDateTo:function(e,t){var n=this.calendar.changeDateTo(e,t),a=this;setTimeout(function(){n?a.onMonthChange(function(){a.indicateEvents()}):a.update()},1)}},Organizer.prototype.draw=function(){var e='<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="'+this.calendar.colors[3]+'" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"></path></svg>',t='<svg style="width: 24px; height: 24px;" viewBox="0 0 24 24"><path fill="'+this.calendar.colors[3]+'" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"></path></svg>',n=document.createElement("DIV");n.className="events "+this.calendar.size;var a=document.createElement("DIV");a.className="date",a.style.backgroundColor=this.calendar.colors[1],a.style.color=this.calendar.colors[3];var i=document.createElement("DIV");i.id=this.id+"-day-back",i.insertAdjacentHTML("beforeend",e),a.appendChild(i);var d=document.createElement("SPAN");d.id=this.id+"-date",a.appendChild(d);var l=document.createElement("DIV");l.id=this.id+"-day-next",l.insertAdjacentHTML("beforeend",t),a.appendChild(l);var s=document.createElement("DIV");s.className="rows";var o=document.createElement("OL");o.className="list",o.id=this.id+"-list",s.appendChild(o),n.appendChild(a),n.appendChild(s),document.getElementById(this.id).appendChild(n)},Organizer.prototype.update=function(){document.getElementById(this.id+"-date").innerHTML=this.calendar.months[this.calendar.date.getMonth()]+" "+this.calendar.date.getDate()+", "+this.calendar.date.getFullYear(),document.getElementById(this.id+"-list").innerHTML="",this.showEvents()},Organizer.prototype.list=function(e){document.getElementById(this.id+"-list").innerHTML="";for(var t=document.createElement("UL"),n=0;n<e.length;n++){var a=document.createElement("LI");a.id=this.id+"-list-item-"+n;var i=document.createElement("DIV"),d=document.createElement("SPAN");d.id=this.id+"-list-item-"+n+"-time",d.class=this.id+" time",d.append(document.createTextNode(e[n].startTime+" - "+e[n].endTime)),i.append(d);var l=document.createElement("P");l.id=this.id+"-list-item-"+n+"-text",l.append(document.createTextNode(e[n].text)),a.append(i),a.append(l),t.append(a)}document.getElementById(this.id+"-list").innerHTML=t.innerHTML},Organizer.prototype.setupBlock=function(e,t,n){var a=t.calendar;document.getElementById(a.id+"-day-"+e).onclick=function(){document.getElementById(a.id+"-day-num-"+e).innerHTML.length>0&&(t.changeDateTo(document.getElementById(a.id+"-day-num-"+e).innerHTML,e),n())}},Organizer.prototype.showEvents=function(e){e=e||this.data;var t=this.calendar.date;try{this.list(e[t.getFullYear()][t.getMonth()+1][t.getDate()])}catch(e){}},Organizer.prototype.indicateEvents=function(e){e=e||this.data;var t=this.calendar.date;if(this.calendar.indicator){var n=document.getElementsByClassName(this.calendar.id+" day listed");try{var a=e[t.getFullYear()][t.getMonth()+1];for(var i in a)a[i].length>0&&(n[i-1].className+=" active")}catch(e){}}this.update()},Organizer.prototype.onMonthChange=function(e){e()},Organizer.prototype.setOnClickListener=function(e,t,n){var a=this.calendar.id,i=this.id;t=t||function(){},n=n||function(){};var d=this;switch(e){case"days-blocks":for(var l=1;l<=42;l++)d.setupBlock(l,d,t);break;case"day-slider":document.getElementById(i+"-day-back").onclick=function(){d.back("day"),t()},document.getElementById(i+"-day-next").onclick=function(){d.next("day"),n()};break;case"month-slider":document.getElementById(a+"-month-back").onclick=function(){d.back("month"),t()},document.getElementById(a+"-month-next").onclick=function(){d.next("month"),n()};break;case"year-slider":document.getElementById(a+"-year-back").onclick=function(){d.back("year"),t()},document.getElementById(a+"-year-next").onclick=function(){d.next("year"),n()}}};
